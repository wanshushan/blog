---
import type { MarkdownHeading } from "astro";
import Categories from "./Categories.astro";
import Profile from "./Profile.astro";
import RuntimeStats from "./RuntimeStats.astro";
import Tag from "./Tags.astro";
import TOC from "./TOC.astro";
// Umami网站统计组件
import UmamiStats from "./UmamiStats.astro";
import WidgetLayout from "./WidgetLayout.astro";

interface Props {
	class?: string;
	headings?: MarkdownHeading[];
	showProfile?: boolean;
	showCategories?: boolean;
	showTags?: boolean;
	showUmamiStats?: boolean;
	showRuntimeStats?: boolean;
	showTOC?: boolean;
}

const className = Astro.props.class;
const {
	headings = [],
	showProfile = true,
	showCategories = true,
	showTags = true,
	showUmamiStats = true,
	showRuntimeStats = true,
	showTOC = false,
} = Astro.props;
---
<div id="sidebar" class:list={[className, "w-full"]}>
    <div id="sidebar-sticky" class="transition-all duration-700 flex flex-col w-full gap-4 top-4 sticky top-4">
		{showProfile && <Profile></Profile>}
        {showCategories && <Categories class="onload-animation" style="animation-delay: 150ms"></Categories>}
        {showTags && <Tag class="onload-animation" style="animation-delay: 200ms"></Tag>}
        <!-- Umami网站统计组件 -->
		{showUmamiStats && <UmamiStats class="onload-animation" style="animation-delay: 200ms"></UmamiStats>}
        {showRuntimeStats && <RuntimeStats class="onload-animation" style="animation-delay: 250ms"></RuntimeStats>}
		{showTOC && <WidgetLayout name="目录" id="toc-widget" class="onload-animation" style="animation-delay: 300ms">
			<div id="toc-inner-wrapper" class="w-full max-h-[calc(100vh_-_12rem)] overflow-y-scroll overflow-x-hidden hide-scrollbar">
				<div id="toc" class="w-full h-full transition-swup-fade">
					<TOC headings={headings}></TOC>
				</div>
			</div>
		</WidgetLayout>}
    </div>
</div>
